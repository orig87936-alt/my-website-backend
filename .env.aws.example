# 🚀 AWS 生产环境配置模板
# 专用于 AWS 部署（EC2/Lightsail + RDS）
# 复制此文件为 .env 并填入实际值

# ============================================================
# 应用配置
# ============================================================
ENVIRONMENT=production
DEBUG=False
HOST=0.0.0.0
PORT=8000

# ============================================================
# 数据库配置 - AWS RDS (必须修改)
# ============================================================
# 格式: postgresql+asyncpg://用户名:密码@RDS端点:端口/数据库名
DATABASE_URL=postgresql+asyncpg://newsuser:YOUR_DB_PASSWORD@sl-news-db.xxxxx.us-east-1.rds.amazonaws.com:5432/newsdb

# ============================================================
# JWT 密钥 (必须修改 - 使用 PRODUCTION_SECRETS.txt 中的密钥)
# ============================================================
SECRET_KEY=dfd5ca7b75d6acae1984451f3b600211945af4d74553b15e800371dc481305b2
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================
# 管理员账户 (必须修改为强密码)
# ============================================================
ADMIN_USERNAME=admin
ADMIN_PASSWORD=YOUR_STRONG_PASSWORD_HERE

# ============================================================
# DeepSeek API (已配置)
# ============================================================
DEEPSEEK_API_KEY=sk-7dd7f650117143e9b9c2d312164cb873
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
DEEPSEEK_MODEL=deepseek-chat
DEEPSEEK_MAX_TOKENS=1000
DEEPSEEK_TEMPERATURE=0.7

# ============================================================
# OpenAI API (必须修改)
# ============================================================
OPENAI_API_KEY=YOUR_OPENAI_API_KEY_HERE
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# ============================================================
# CORS 配置 (必须修改为你的域名)
# ============================================================
# CloudFront 域名或自定义域名
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com,https://d1234567890.cloudfront.net

# ============================================================
# 前端 URL (必须修改)
# ============================================================
# CloudFront 域名或自定义域名
FRONTEND_URL=https://yourdomain.com

# ============================================================
# 邮件服务 (可选 - 推荐使用 AWS SES)
# ============================================================
# 选项 1: Resend
RESEND_API_KEY=
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=S&L News Platform

# 选项 2: SMTP (可以使用 AWS SES SMTP)
SMTP_HOST=email-smtp.us-east-1.amazonaws.com
SMTP_PORT=587
SMTP_USER=YOUR_SES_SMTP_USERNAME
SMTP_PASSWORD=YOUR_SES_SMTP_PASSWORD

# ============================================================
# Google OAuth (可选)
# ============================================================
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=https://api.yourdomain.com/api/v1/auth/google/callback

# ============================================================
# 预约系统配置
# ============================================================
APPOINTMENT_TIME_SLOTS=09:00,09:30,10:00,10:30,11:00,11:30,13:00,13:30,14:00,14:30,15:00,15:30,16:00,16:30,17:00,17:30
EMAIL_RETRY_MAX_ATTEMPTS=3
EMAIL_RETRY_DELAYS=60,300,1800

# ============================================================
# AI 聊天配置
# ============================================================
CHAT_RESPONSE_TIMEOUT=3
VECTOR_SEARCH_LIMIT=5

# ============================================================
# 翻译服务配置
# ============================================================
TRANSLATION_PROVIDER=deepseek
DEEPL_API_KEY=
TRANSLATION_CACHE_DAYS=30

# ============================================================
# 文档上传配置
# ============================================================
MAX_UPLOAD_SIZE=10485760
ALLOWED_FILE_TYPES=.md,.docx
TEMP_UPLOAD_DIR=./temp_uploads

# ============================================================
# AWS 特定配置说明
# ============================================================
# 
# 1. RDS 数据库端点获取：
#    - 登录 AWS Console → RDS → Databases
#    - 点击你的数据库实例
#    - 复制 "Endpoint" 字段
#    - 格式：sl-news-db.xxxxx.us-east-1.rds.amazonaws.com
#
# 2. 安全组配置：
#    - RDS 安全组：允许 EC2/Lightsail 安全组访问端口 5432
#    - EC2/Lightsail 安全组：允许端口 80, 443, 8000
#
# 3. CloudFront 配置：
#    - 创建 CloudFront 分发指向 S3 存储桶
#    - 配置自定义域名（可选）
#    - 获取 CloudFront 域名并添加到 CORS_ORIGINS
#
# 4. 文件权限：
#    chmod 600 .env
#
# 5. 环境变量验证：
#    python -c "from app.config import get_settings; s = get_settings(); print(f'Env: {s.ENVIRONMENT}')"
#

